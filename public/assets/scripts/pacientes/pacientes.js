import{listarVinculos,cargarBarrios,listarTutores,listarCiudades,ocultarErrorCampo}from"../lib/definiciones.js";document.addEventListener("DOMContentLoaded",(function(){const t=document.getElementById("es_paciente");t.onclick=()=>{$("#es_paciente").prop("checked")?(t.value=1,$("#paciente").show(),$("#tutor").hide(),$("#tutores").show(),$("#vinculo").show()):(t.value=0,$("#paciente").hide(),$("#tutor").show(),$("#tutores").hide(),$("#vinculo").hide())};const e=document.getElementById("id_ciudad");e.addEventListener("change",(()=>{let t='<option select value="">Seleccione un Barrio</option>';$("#id_barrio").html(t),$("#id_barrio").selectpicker("render"),document.getElementById("id_barrio").innerHTML=t,$("#id_barrio").val(""),$("#id_barrio").selectpicker("refresh"),cargarBarrios(e.value)}));document.getElementById("edad").addEventListener("change",(()=>{}))}));let tblPacientesTutores=$("#tblPacientesTutores").DataTable({aProcessing:!0,aServerSide:!0,bFilter:!0,scrollX:!1,language:{decimal:"",emptyTable:"No hay informaci√≥n",info:"Mostrando _START_ a _END_ de _TOTAL_ Entradas",infoEmpty:"Mostrando 0 to 0 of 0 Entradas",infoFiltered:"(Filtrado de _MAX_ total entradas)",infoPostFix:"",thousands:",",lengthMenu:"Mostrar _MENU_ Entradas",loadingRecords:"Cargando...",processing:"Procesando...",search:"Buscar:",zeroRecords:"Sin resultados encontrados",paginate:{first:"Primero",last:"Ultimo",next:"Siguiente",previous:"Anterior"}},dom:"Bfrtip",buttons:[{extend:"pdf",title:"Listado de Personas",filename:"listado_personas",text:'Exportar a PDF <i class="fa fa-file-pdf"></i>'},{extend:"excelHtml5",title:"Listado de Personas",filename:"listado_personas",text:'Exportar a Excel <i class="fa fa-file-excel"></i>'}],lengthChange:!1,bDestroy:!0,iDisplayLength:10,order:[[0,"desc"]]});const initForm=()=>{$("#tutores").hide(),$("#vinculo").hide(),$("#paciente").hide(),$("#tutor").hide(),listarVinculos(),listarPersonas(),listarCiudades(),listarTutores(),ocultarErrorCampo()},listarPersonas=()=>{$("#tblPacientesTutores").DataTable().clear().draw(),axios.get("listarpersonas").then((function(t){let e,a,i,s=t.data;Array.from(s).forEach((function(t){1==t.estado?(e='<span class="badge badge-success mr-2 ml-0"><i class="far fa-thumbs-up"></i> Activo</span>',i='<button class="btn btn-outline-warning btn-xs wishlist" data-toggle="tooltip" data-placement="top" title="Actualizar Persona" onclick="editar('+t.id_persona+')"><i class="far fa-edit"></i></button><button class="btn btn-outline-danger btn-xs wishlist" data-toggle="tooltip" data-placement="top" title="Inactivar Persona" onclick="desactivar('+t.id_persona+')"><i class="far fa-window-close"></i></button>'):(e='<span class="badge badge-danger mr-2 ml-0"><i class="far fa-thumbs-down"></i> Inactivo</span>',i='<button class="btn btn-outline-warning btn-xs wishlist" data-toggle="tooltip" data-placement="top" title="Actualizar Persona" onclick="editar('+t.id_persona+')"><i class="far fa-edit"></i></button><button class="btn btn-outline-success btn-xs wishlist" data-toggle="tooltip" data-placement="top" title="Activar Persona" onclick="activar('+t.id_persona+')"><i class="fas fa-check "></i></button>'),a=1==t.es_paciente?'<span class="badge badge-success mr-2 ml-0">Es paciente</span>':'<span class="badge badge-info mr-2 ml-0">Es Tutor</span>',tblPacientesTutores.row.add([i,t.ci_persona,t.denominacion,a,t.edad,t.barrio,t.ciudad,t.departamento,e]).draw(!1)}))})).catch((function(t){console.log(t)}))};$("#tutores").hide(),$("#vinculo").hide(),$("#paciente").hide(),$("#tutor").hide(),listarVinculos(),listarPersonas(),listarCiudades(),listarTutores(),ocultarErrorCampo();
